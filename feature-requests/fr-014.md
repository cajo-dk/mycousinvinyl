# Feature Request

- REQUEST ID: FR-014
- DATE: 2026.01.10

## Abstract

Add an admin-visible system log with configurable retention, daily pruning, and automatic logging of Settings changes.

## Scope

- Backend: store log records, enforce retention, expose paged log listing, and add a daily prune task.
- API: list logs with pagination; update log retention setting.
- Frontend: Settings page tab for Logs and retention selector in Preferences.
- Access: Admin-only visibility and actions.

## Requirements

### Log Record

Each log record includes:
- Date and time
- User full name (or `*system` for non-user initiated events)
- Severity: `INFO`, `WARN`, `ERROR`
- Function/Component (e.g., Import, Artists, Albums, Backup, Settings)
- Log text

### Settings UI

- Add a new `Logs` tab after `Keywords`.
- Logs view shows entries in a table with pagination.
- Pagination sizes: 50 (default), 100, 200.
- Add a new `Tools` tab after `Keywords` with a button to run a backup immediately.

### Retention

- Admin can change log retention in Preferences: 30, 60 (default), 90 days.

### Pruning

- Run a pruning process daily at 02:00 (local server time).
- Prunes log records older than the configured retention window.

### Settings Audit

- Any changes performed in Settings are logged with the current user name.
- Function/Component is set to `Settings`.

## Security

- Log listing and retention changes are available to Admin only.
- Domain/application layers remain security-agnostic.

## Acceptance Criteria

- Admin can view Logs tab and page through entries (50/100/200 per page).
- Preferences allow selecting 30/60/90-day retention, persisted on save.
- Daily pruning removes records older than the configured retention.
- Updates from Settings actions generate log entries with component `Settings`.
