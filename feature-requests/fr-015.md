# Feature Request

- REQUEST ID: FR-015
- DATE: 2026.01.11

## Abstract

Adopt Alembic for automatic database upgrades so schema changes ship with normal commits and apply automatically during deployments.

## Scope

- Backend: integrate Alembic migrations and auto-upgrade flow.
- Deployment: run migrations automatically on startup or during CI/CD.
- Data safety: ensure migrations are transactional and idempotent where possible.

## Assumptions

- Existing SQL migration scripts are preserved for historical reference or backfill.

## Requirements

### Alembic Integration

- Add Alembic configuration and versioned migrations.
- Migrations are generated/edited in code review and committed with feature changes.
- Alembic uses the current database schema as a baseline (no destructive reset).

### Automatic Upgrades

- `alembic upgrade head` runs automatically as part of deployment or app startup.
- If migration fails, the deployment fails fast and does not start the API.
- Migrations must be safe for production datasets (no full table rewrites without explicit approval).

### Type Handling

- Alembic migrations define and manage required database enum/types.
- Type creation, update, and deprecation are explicit, reviewed steps.

### Observability

- Log migration start, completion, and failures to the system log under component `Database`.

## Acceptance Criteria

- A new migration committed in a PR is applied automatically on deploy.
- No migration attempts to create or drop existing enum/types.
- On migration failure, the API does not start and logs the failure details.
